/* =======================================================
 * PKP Styles â€” v4.2 (Payment Hub + Approval + Export)
 * ======================================================= */

 :root{
  --bg:#f7fafc; --panel:#ffffff; --text:#0f172a; --text-dim:#64748b; --line:#e5e7eb;
  --grad:linear-gradient(45deg,#06b6d4,#3b82f6);
  --danger:#ef4444; --success:#16a34a; --warn:#f59e0b; --info:#3b82f6; --muted:#94a3b8;
}
*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
  touch-action: manipulation;
}
body.dark-theme{ --bg:#0c1425; --panel:#1e293b; --text:#e2e8f0; --text-dim:#94a3b8; --line:#334155; --danger:#f87171; --success:#22c55e; --warn:#f59e0b; --info:#60a5fa; --muted:#9aa8be; }

.hidden{display:none}
.mt8{margin-top:8px}

/* Shell */
#app-shell{ display:flex; min-height:100dvh; }
.sidebar{
  width:260px; background:var(--panel); border-right:1px solid var(--line);
  position:fixed; inset:0 auto 0 0; transform:translateX(-100%); transition:transform .2s ease;
  z-index:800; display:flex; flex-direction:column;
}
.sidebar.open{ transform:translateX(0); }
.content-wrapper{ flex:1; margin-left:0; display:flex; flex-direction:column; min-width:0; }

.main-header{
  position:sticky; top:0; z-index:900;
  background:var(--panel); border-bottom:1px solid var(--line);
  padding:.5rem .75rem; display:flex; justify-content:space-between; align-items:center; gap:.5rem;
}
.header-actions{ display:flex; align-items:center; gap:.25rem; }
.icon-btn{ background:none;border:none;cursor:pointer;border-radius:8px;padding:.5rem;color:var(--text-dim); }
.icon-btn:hover{ background:rgba(0,0,0,.04); }
body.dark-theme .icon-btn:hover{ background:rgba(255,255,255,.06); }
.user-profile-btn img{ width:40px;height:40px;border-radius:50%;display:block; }

/* Search */
.search-wrapper{ position:relative; }
#global-search-container{
  position:absolute; right:0; top:calc(100% + 6px);
  background:var(--panel); border:1px solid var(--line); border-radius:10px; padding:.5rem;
  display:flex; gap:.5rem; z-index:950; width:min(70vw,280px);
}
#global-search-container.hidden{ display:none; }
#global-search-container input{
  border:1px solid var(--line); border-radius:8px; padding:.5rem .6rem; width:100%; background:transparent; color:var(--text);
}

/* Sidebar content */
.sidebar-head{ display:flex; align-items:center; gap:.75rem; padding:1rem; }
.brand-logo-sidebar{ width:40px;height:40px;object-fit:contain; }
.nav-container{ flex:1; overflow:auto; padding: .25rem .5rem 1rem; }
.nav-item{
  width:100%; display:flex; align-items:center; gap:.75rem;
  background:none; border:none; text-align:left; color:var(--text-dim);
  padding:.65rem .75rem; border-radius:10px; cursor:pointer;
}
.nav-item:hover{ background:rgba(0,0,0,.04); color:var(--text); }
body.dark-theme .nav-item:hover{ background:rgba(255,255,255,.06); }
.nav-item.active{ color:#fff; background:var(--grad); }
.sidebar-footer{ padding:.75rem; border-top:1px solid var(--line); }
#auth-btn.danger:hover{ background:#ef4444; color:#fff; }

/* Scrim */
.scrim{ position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:700; opacity:0; pointer-events:none; transition:opacity .2s; }
.scrim.show{ opacity:1; pointer-events:auto; }

/* Pages */
.page-container{ padding:1rem; }
.page{ display:none; }
.page.active{ display:block; animation:fade .2s ease; }
@keyframes fade { from{opacity:0} to{opacity:1} }

/* Cards & section */
.card{ background:var(--panel); border:1px solid var(--line); border-radius:12px; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
.card-pad{ padding:12px; }
.section-head{ display:flex; justify-content:space-between; align-items:center; gap:.5rem; margin-bottom:.75rem; }
.chips{ display:flex; gap:.5rem; flex-wrap:wrap; }
.chip{ background:rgba(0,0,0,.04); color:var(--text); border:1px solid var(--line); border-radius:999px; padding:.25rem .6rem; font-size:.85rem; }
body.dark-theme .chip{ background:rgba(255,255,255,.05); }

/* KPI */
.kpi-grid{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:.75rem; }
.kpi-card{ padding:12px; border:1px solid var(--line); border-radius:12px; background:var(--panel); }
.kpi-card h5{ margin:0 0 4px 0; font-size:.95rem; color:var(--text-dim); }
.kpi-card .amt{ font-weight:700; font-size:1.25rem; }

/* Buttons */
.btn{
  padding:.55rem 1rem; border:none; border-radius:10px; font-weight:600; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center; gap:.45rem;
}
.btn-primary{ background:var(--grad); color:#fff; }
.btn-secondary{ background:rgba(0,0,0,.04); color:var(--text); border:1px solid var(--line); }
body.dark-theme .btn-secondary{ background:rgba(255,255,255,.06); }
.btn-ghost{ background:transparent; color:var(--text-dim); border:1px dashed var(--line); }
.btn-danger{ background: var(--danger); color:#fff; }
.btn-xs{ padding:.35rem .6rem; border-radius:8px; font-size:.82rem; }

/* Notification & status dots */
.notification-wrapper{ position:relative; }
.notification-badge{ position:absolute; top:6px; right:6px; width:10px; height:10px; background:#ef4444; border-radius:999px; border:2px solid var(--panel); }
.notification-badge.hidden{ display:none; }
.connection-status{ display:flex; align-items:center; margin-left:.25rem; }
.connection-status .status-dot{ width:10px;height:10px;border-radius:999px;border:2px solid var(--panel); }
.connection-status .online{ background:#22c55e; }
.connection-status .pending{ background:#f59e0b; }
.connection-status .offline{ background:#ef4444; }

/* User dropdown */
.user-profile-wrapper{ position:relative; }
.user-dropdown{
  position:absolute; right:0; top:calc(100% + 8px); width:300px; z-index:950;
  background:var(--panel); border:1px solid var(--line); border-radius:12px; box-shadow:0 10px 24px rgba(0,0,0,.12);
}
.user-dropdown.hidden{ display:none; }
.user-dropdown-header{ display:flex; gap:.75rem; padding:12px; border-bottom:1px solid var(--line); }
.user-dropdown-footer{ padding:12px; }

/* Modal & toast */
.modal-bg{
  position:fixed; inset:0; display:flex; justify-content:center; align-items:center;
  background:rgba(0,0,0,.55); z-index:1100; padding:1rem;
}
.modal-bg.hidden{ display:none; }
.modal-content{
  width:100%; max-width:640px; max-height:90dvh; overflow:auto;
  background:var(--panel); border:1px solid var(--line); border-radius:14px;
}
.modal-header{ padding:12px; border-bottom:1px solid var(--line); display:flex; align-items:center; justify-content:space-between; }
.modal-body{ padding:12px; }
.modal-footer{ padding:12px; display:flex; justify-content:flex-end; gap:.5rem; }
.modal-open{ overflow:hidden; }

/* Toast */
.popup-container{ position:fixed; right:16px; bottom:16px; z-index:2000; transform:translateY(120%); transition:transform .2s ease; }
.popup-container.show{ transform:translateY(0); }
.popup-content{ display:flex; gap:8px; align-items:center; border-radius:12px; padding:10px 12px; background:#111827; color:#fff; }
.popup-success .popup-content{ background:#16a34a; }
.popup-error .popup-content{ background:#dc2626; }

/* Placeholder guest */
.placeholder-card{
  padding:16px; border-radius:12px; border:1px dashed var(--line);
  display:flex; flex-direction:column; gap:.5rem; align-items:flex-start; margin-top:8px;
}
.placeholder-title{ font-weight:700; }
.placeholder-desc{ color:var(--text-dim); }

/* Forms */
.form-grid{ display:grid; grid-template-columns:1fr 1fr; gap:.75rem; }
.form-group{ display:flex; flex-direction:column; gap:.35rem; }
.form-group.full{ grid-column:1 / -1; }
label{ font-size:.9rem; color:var(--text-dim); }
input, select, textarea{
  background:transparent; color:var(--text);
  border:1px solid var(--line); border-radius:10px; padding:.55rem .65rem;
}
textarea{ resize:vertical; }

/* Tables */
.table-container{ overflow-x:auto; }
.table{ width:100%; border-collapse:collapse; }
.table th, .table td{ padding:.6rem .5rem; border-bottom:1px solid var(--line); text-align:left; }
.table th{ color:var(--text-dim); font-weight:600; }

/* Status badges */
.badge{ display:inline-flex; align-items:center; padding:.25rem .5rem; border-radius:999px; border:1px solid var(--line); font-size:.78rem; color:var(--text-dim); background:rgba(0,0,0,.03); }
.badge.blue{ color:#2563eb; border-color:#bfdbfe; background:#eff6ff; }
.badge.green{ color:#16a34a; border-color:#bbf7d0; background:#ecfdf5; }
.badge.orange{ color:#b45309; border-color:#fde68a; background:#fffbeb; }
.badge.red{ color:#b91c1c; border-color:#fecaca; background:#fef2f2; }
.badge.gray{ color:#6b7280; border-color:#e5e7eb; background:#f9fafb; }
.badge.solid{ color:#fff; background:var(--grad); border-color:transparent; }

/* Detail grid */
.detail-grid{ display:grid; grid-template-columns:1fr 1fr; gap:.75rem; }
.detail-grid > div{ background:var(--panel); border:1px dashed var(--line); border-radius:10px; padding:.6rem; }

/* Skeleton */
.skeleton{ background:linear-gradient(90deg, rgba(0,0,0,.05), rgba(0,0,0,.08), rgba(0,0,0,.05)); height:64px; border-radius:12px; animation:skeleton 1.2s infinite; }
@keyframes skeleton{ 0%{background-position:0 0} 100%{background-position:200% 0} }

/* Responsive */
@media (min-width: 900px){
  .sidebar{ transform:none; }
  .content-wrapper{ margin-left:260px; }
  .page-container{ padding:1rem 1.25rem; }
  .kpi-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
}
@media (min-width: 1280px){
  .kpi-grid{ grid-template-columns: repeat(5, minmax(0,1fr)); }
}

/* Touch tweaks */
* { -webkit-tap-highlight-color: transparent; }

/* === Auth Modal Polished (unified across devices) === */
#login-modal.modal-bg { z-index: 1200; }
#login-modal .modal-content {
  max-width: 520px;
  border-radius: 16px;
  overflow: hidden;
  padding: 0;
}
.auth-card {
  background: var(--panel);
  display: grid;
  grid-template-rows: auto 1fr auto;
}
.auth-card .auth-header {
  padding: 16px 18px;
  border-bottom: 1px solid var(--line);
}
.auth-card .auth-header h4 {
  margin: 0;
  font-size: 1.05rem;
}
.auth-card .auth-body {
  padding: 16px 18px;
  color: var(--text-dim);
}
.auth-card .auth-actions {
  padding: 16px 18px;
  border-top: 1px solid var(--line);
  display: flex; gap: 8px; justify-content: flex-end;
}
.google-btn.w-full {
  width: 100%;
  border: 1px solid var(--line);
  background: #fff;
  color: #111827;
  border-radius: 12px;
  padding: .75rem 1rem;
}
body.dark-theme .google-btn.w-full {
  background: #ffffff;
  color: #111827;
}
.google-btn .google-icon { width: 18px; height: 18px; }
@media (max-width: 420px) {
  #login-modal .modal-content { margin: 0 12px; }
}
